<html>
  <head>
    <title>Miserables Force</title>
    <script type="text/javascript" src="../../protovis-d3.2.js"></script>
    <script type="text/javascript" src="../miserables.js"></script>
    <style type="text/css">

body {
  margin: 0;
}

    </style>
  </head>
  <body>
    <script type="text/javascript+protovis">

var graph = pv.Layout.force(miserables.vertices, miserables.edges),
    transform = pv.Behavior.transform(),
    w = window.innerWidth,
    h = window.innerHeight;

var vis = new pv.Panel()
    .width(w)
    .height(h)
    .fillStyle("white")
    .strokeStyle("#ccc")
    .event("mousedown", transform.pan)
    .event("mousewheel", transform.zoom);

/* Links. */
vis.add(pv.Panel)
    .data(graph.links)
  .add(pv.Line)
    .extend(graph.link);

/* Nodes. */
vis.add(pv.Dot)
    .extend(graph.node)
    .size(function(d) (d.linkDegree + 4) * Math.pow(this.scale, -1.5))
    .fillStyle(function(d) d.fixed ? "orange" : "white")
    .title(function(d) d.nodeValue)
    .event("mousedown", pv.Behavior.drag());

setInterval(function() {
    vis.render();
    graph.step();
  }, 50);

    </script>
  </body>
</html>
